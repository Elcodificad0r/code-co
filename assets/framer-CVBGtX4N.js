import{r as f,j as K}from"./react-vendor-rgf-A-eq.js";import{g as le,s as Ft,i as jt,a as ut,b as it,c as ce,d as ue,e as fe,f as he,r as de,h as me,j as Ot,k as ge,l as pe,m as ve,o as ye,S as Pe,H as xe,F as S,n as we,p as Ht,q as F,t as Z,u as w,v as Rt,w as j,x as ft,y as Ee,z as O,A as Q,B as tt,C as Bt,D as Se,E,G as Ce,I as Me,J as Le,K as ht,L as Ve,M as Ae,N as be,O as et,P as De,Q as V,R as Te,T as ke,U as Gt,V as Ie,W as We,X as Fe,Y as je,Z as Oe,_ as He,$ as Re,a0 as Nt,a1 as dt,a2 as b,a3 as N,a4 as Be,a5 as Ge}from"./vendor-DIA31StL.js";const Ut=f.createContext({});function A(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const zt=typeof window<"u",rt=zt?f.useLayoutEffect:f.useEffect,at=f.createContext(null),R=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Ne(e=!0){const t=f.useContext(at);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,i=f.useId();f.useEffect(()=>{if(e)return o(i)},[e]);const r=f.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,r]:[!0]}const $t=f.createContext({strict:!1}),mt={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let gt=!1;function Ue(){if(gt)return;const e={};for(const t in mt)e[t]={isEnabled:n=>mt[t].some(s=>!!n[s])};Ft(e),gt=!0}function Xt(){return Ue(),le()}function ze(e){const t=Xt();for(const n in e)t[n]={...t[n],...e[n]};Ft(t)}const $e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function H(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$e.has(e)}let Yt=e=>!H(e);function Xe(e){typeof e=="function"&&(Yt=t=>t.startsWith("on")?!H(t):e(t))}try{Xe(require("@emotion/is-prop-valid").default)}catch{}function Ye(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(Yt(o)||n===!0&&H(o)||!t&&!H(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}const B=f.createContext({});function _e(e,t){if(jt(e)){const{initial:n,animate:s}=e;return{initial:n===!1||ut(n)?n:void 0,animate:ut(s)?s:void 0}}return e.inherit!==!1?t:{}}function qe(e){const{initial:t,animate:n}=_e(e,f.useContext(B));return f.useMemo(()=>({initial:t,animate:n}),[pt(t),pt(n)])}function pt(e){return Array.isArray(e)?e.join(" "):e}const lt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _t(e,t,n){for(const s in t)!it(t[s])&&!ce(s,n)&&(e[s]=t[s])}function Je({transformTemplate:e},t){return f.useMemo(()=>{const n=lt();return ue(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Ke(e,t){const n=e.style||{},s={};return _t(s,n,e),Object.assign(s,Je(e,t)),s}function Ze(e,t){const n={},s=Ke(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const qt=()=>({...lt(),attrs:{}});function Qe(e,t,n,s){const o=f.useMemo(()=>{const i=qt();return fe(i,t,he(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};_t(i,e.style,e),o.style={...i,...o.style}}return o}const tn=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ct(e){return typeof e!="string"||e.includes("-")?!1:!!(tn.indexOf(e)>-1||/[A-Z]/u.test(e))}function en(e,t,n,{latestValues:s},o,i=!1,r){const u=(r??ct(e)?Qe:Ze)(t,s,o,e),l=Ye(t,typeof e=="string",i),d=e!==f.Fragment?{...l,...u,ref:n}:{},{children:h}=t,c=f.useMemo(()=>it(h)?h.get():h,[h]);return f.createElement(e,{...d,children:c})}function nn({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,o){return{latestValues:sn(n,s,o,e),renderState:t()}}function sn(e,t,n,s){const o={},i=s(e,{});for(const c in i)o[c]=de(i[c]);let{initial:r,animate:a}=e;const u=jt(e),l=me(e);t&&l&&!u&&e.inherit!==!1&&(r===void 0&&(r=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||r===!1;const h=d?a:r;if(h&&typeof h!="boolean"&&!Ot(h)){const c=Array.isArray(h)?h:[h];for(let m=0;m<c.length;m++){const g=ge(e,c[m]);if(g){const{transitionEnd:y,transition:P,...v}=g;for(const p in v){let x=v[p];if(Array.isArray(x)){const C=d?x.length-1:0;x=x[C]}x!==null&&(o[p]=x)}for(const p in y)o[p]=y[p]}}}return o}const Jt=e=>(t,n)=>{const s=f.useContext(B),o=f.useContext(at),i=()=>nn(e,t,s,o);return n?i():A(i)},on=Jt({scrapeMotionValuesFromProps:pe,createRenderState:lt}),rn=Jt({scrapeMotionValuesFromProps:ve,createRenderState:qt}),an=Symbol.for("motionComponentSymbol");function ln(e,t,n){const s=f.useRef(n);f.useInsertionEffect(()=>{s.current=n});const o=f.useRef(null);return f.useCallback(i=>{var a;i&&((a=e.onMount)==null||a.call(e,i)),t&&(i?t.mount(i):t.unmount());const r=s.current;if(typeof r=="function")if(i){const u=r(i);typeof u=="function"&&(o.current=u)}else o.current?(o.current(),o.current=null):r(i);else r&&(r.current=i)},[t])}const Kt=f.createContext({});function L(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function cn(e,t,n,s,o,i){var x,C;const{visualElement:r}=f.useContext(B),a=f.useContext($t),u=f.useContext(at),l=f.useContext(R),d=l.reducedMotion,h=l.skipAnimations,c=f.useRef(null),m=f.useRef(!1);s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:i}),m.current&&c.current&&(c.current.manuallyAnimateOnMount=!0));const g=c.current,y=f.useContext(Kt);g&&!g.projection&&o&&(g.type==="html"||g.type==="svg")&&un(c.current,n,o,y);const P=f.useRef(!1);f.useInsertionEffect(()=>{g&&P.current&&g.update(n,u)});const v=n[ye],p=f.useRef(!!v&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,v))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,v)));return rt(()=>{m.current=!0,g&&(P.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),p.current&&g.animationState&&g.animationState.animateChanges())}),f.useEffect(()=>{g&&(!p.current&&g.animationState&&g.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)==null||G.call(window,v)}),p.current=!1),g.enteringChildren=void 0)}),g}function un(e,t,n,s){const{layoutId:o,layout:i,drag:r,dragConstraints:a,layoutScroll:u,layoutRoot:l,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Zt(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!r||a&&L(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:u,layoutRoot:l})}function Zt(e){if(e)return e.options.allowProjection!==!1?e.projection:Zt(e.parent)}function U(e,{forwardMotionProps:t=!1,type:n}={},s,o){s&&ze(s);const i=n?n==="svg":ct(e),r=i?rn:on;function a(l,d){let h;const c={...f.useContext(R),...l,layoutId:fn(l)},{isStatic:m}=c,g=qe(l),y=r(l,m);if(!m&&zt){hn();const P=dn(c);h=P.MeasureLayout,g.visualElement=cn(e,y,c,o,P.ProjectionNode,i)}return K.jsxs(B.Provider,{value:g,children:[h&&g.visualElement?K.jsx(h,{visualElement:g.visualElement,...c}):null,en(e,l,ln(y,g.visualElement,d),y,m,t,i)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const u=f.forwardRef(a);return u[an]=e,u}function fn({layoutId:e}){const t=f.useContext(Ut).id;return t&&e!==void 0?t+"-"+e:e}function hn(e,t){f.useContext($t).strict}function dn(e){const t=Xt(),{drag:n,layout:s}=t;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(e)||s!=null&&s.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function mn(e,t){if(typeof Proxy>"u")return U;const n=new Map,s=(i,r)=>U(i,r,e,t),o=(i,r)=>s(i,r);return new Proxy(o,{get:(i,r)=>r==="create"?s:(n.has(r)||n.set(r,U(r,void 0,e,t)),n.get(r))})}const gn=(e,t)=>t.isSVG??ct(e)?new Pe(t):new xe(t,{allowProjection:e!==f.Fragment});class pn extends S{constructor(t){super(t),t.animationState||(t.animationState=we(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ot(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let vn=0;class yn extends S{constructor(){super(...arguments),this.id=vn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Pn={animation:{Feature:pn},exit:{Feature:yn}};function T(e){return{point:{x:e.pageX,y:e.pageY}}}const xn=e=>t=>Ht(t)&&e(t,T(t));function D(e,t,n,s){return F(e,t,xn(n),s)}const Qt=({current:e})=>e?e.ownerDocument.defaultView:null,vt=(e,t)=>Math.abs(e-t);function wn(e,t){const n=vt(e.x,t.x),s=vt(e.y,t.y);return Math.sqrt(n**2+s**2)}const yt=new Set(["auto","scroll"]);class te{constructor(t,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:r=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=wn(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:P}=m,{timestamp:v}=Z;this.history.push({...P,timestamp:v});const{onStart:p,onMove:x}=this.handlers;g||(p&&p(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=z(g,this.transformPagePoint),w.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:P,resumeAnimation:v}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=$(m.type==="pointercancel"?this.lastMoveEventInfo:z(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,p),P&&P(m,p)},!Ht(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=o||window;const u=T(t),l=z(u,this.transformPagePoint),{point:d}=l,{timestamp:h}=Z;this.history=[{...d,timestamp:h}];const{onSessionStart:c}=n;c&&c(t,$(l,this.history)),this.removeListeners=Rt(D(this.contextWindow,"pointermove",this.handlePointerMove),D(this.contextWindow,"pointerup",this.handlePointerUp),D(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(t){let n=t.parentElement;for(;n;){const s=getComputedStyle(n);(yt.has(s.overflowX)||yt.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const s=t===window,o=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:o.x-n.x,y:o.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,o),w.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),j(this.updatePoint)}}function z(e,t){return t?{point:t(e.point)}:e}function Pt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $({point:e},t){return{point:e,delta:Pt(e,ee(t)),offset:Pt(e,En(t)),velocity:Sn(t,.1)}}function En(e){return e[0]}function ee(e){return e[e.length-1]}function Sn(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const o=ee(e);for(;n>=0&&(s=e[n],!(o.timestamp-s.timestamp>ft(t)));)n--;if(!s)return{x:0,y:0};s===e[0]&&e.length>2&&o.timestamp-s.timestamp>ft(t)*2&&(s=e[1]);const i=Ee(o.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const r={x:(o.x-s.x)/i,y:(o.y-s.y)/i};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function Cn(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?O(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?O(n,e,s.max):Math.min(e,n)),e}function xt(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Mn(e,{top:t,left:n,bottom:s,right:o}){return{x:xt(e.x,n,o),y:xt(e.y,t,s)}}function wt(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Ln(e,t){return{x:wt(e.x,t.x),y:wt(e.y,t.y)}}function Vn(e,t){let n=.5;const s=Q(e),o=Q(t);return o>s?n=tt(t.min,t.max-s,e.min):s>o&&(n=tt(e.min,e.max-o,t.min)),Bt(0,1,n)}function An(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const nt=.35;function bn(e=nt){return e===!1?e=0:e===!0&&(e=nt),{x:Et(e,"left","right"),y:Et(e,"top","bottom")}}function Et(e,t,n){return{min:St(e,t),max:St(e,n)}}function St(e,t){return typeof e=="number"?e:e[t]||0}const Dn=new WeakMap;class Tn{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=h=>{n&&this.snapToCursor(T(h).point),this.stopAnimation()},r=(h,c)=>{const{drag:m,dragPropagation:g,onDragStart:y}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ae(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=c,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),E(v=>{let p=this.getAxisMotionValue(v).get()||0;if(be.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const C=x.layout.layoutBox[v];C&&(p=Q(C)*(parseFloat(p)/100))}}this.originPoint[v]=p}),y&&w.update(()=>y(h,c),!1,!0),ht(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},a=(h,c)=>{this.latestPointerEvent=h,this.latestPanInfo=c;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:y,onDrag:P}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=c;if(g&&this.currentDirection===null){this.currentDirection=In(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",c.point,v),this.updateAxis("y",c.point,v),this.visualElement.render(),P&&w.update(()=>P(h,c),!1,!0)},u=(h,c)=>{this.latestPointerEvent=h,this.latestPanInfo=c,this.stop(h,c),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new te(t,{onSessionStart:i,onStart:r,onMove:a,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:Qt(this.visualElement),element:this.visualElement.current})}stop(t,n){const s=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!s)return;const{velocity:r}=o;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&w.postRender(()=>a(s,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,s){const{drag:o}=this.getProps();if(!s||!k(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(r=Cn(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&L(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Mn(s.layoutBox,t):this.constraints=!1,this.elastic=bn(n),o!==this.constraints&&!L(t)&&s&&this.constraints&&!this.hasMutatedConstraints&&E(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=An(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!L(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=Ce(s,o.root,this.visualElement.getTransformPagePoint());let r=Ln(o.layout.layoutBox,i);if(n){const a=n(Me(r));this.hasMutatedConstraints=!!a,a&&(r=Le(a))}return r}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},l=E(d=>{if(!k(d,n,this.currentDirection))return;let h=u&&u[d]||{};r&&(h={min:0,max:0});const c=o?200:1e6,m=o?40:1e7,g={type:"inertia",velocity:s?t[d]:0,bounceStiffness:c,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return ht(this.visualElement,t),s.start(Ve(t,s,0,n,this.visualElement,!1))}stopAnimation(){E(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){E(n=>{const{drag:s}=this.getProps();if(!k(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:r,max:a}=o.layout.layoutBox[n],u=i.get()||0;i.set(t[n]-O(r,a,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!L(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};E(r=>{const a=this.getAxisMotionValue(r);if(a&&this.constraints!==!1){const u=a.get();o[r]=Vn({min:u,max:u},this.constraints[r])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),E(r=>{if(!k(r,t,null))return;const a=this.getAxisMotionValue(r),{min:u,max:l}=this.constraints[r];a.set(O(u,l,o[r]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Dn.set(this.visualElement,this);const t=this.visualElement.current,n=D(t,"pointerdown",l=>{const{drag:d,dragListener:h=!0}=this.getProps(),c=l.target,m=c!==t&&De(c);d&&h&&!m&&this.start(l)});let s;const o=()=>{const{dragConstraints:l}=this.getProps();L(l)&&l.current&&(this.constraints=this.resolveRefConstraints(),s||(s=kn(t,l.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,r=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),w.read(o);const a=F(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(E(h=>{const c=this.getAxisMotionValue(h);c&&(this.originPoint[h]+=l[h].translate,c.set(c.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),r(),u&&u(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:r=nt,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:i,dragElastic:r,dragMomentum:a}}}function Ct(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function kn(e,t,n){const s=et(e,Ct(n)),o=et(t,Ct(n));return()=>{s(),o()}}function k(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function In(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Wn extends S{constructor(t){super(t),this.removeGroupControls=V,this.removeListeners=V,this.controls=new Tn(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||V}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const X=e=>(t,n)=>{e&&w.update(()=>e(t,n),!1,!0)};class Fn extends S{constructor(){super(...arguments),this.removePointerDownListener=V}onPointerDown(t){this.session=new te(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qt(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:X(t),onStart:X(n),onMove:X(s),onEnd:(i,r)=>{delete this.session,o&&w.postRender(()=>o(i,r))}}}mount(){this.removePointerDownListener=D(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Y=!1;class jn extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&o&&s.register(i),Y&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Te.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:o,isPresent:i}=this.props,{projection:r}=s;return r&&(r.isPresent=i,t.layoutDependency!==n&&r.setOptions({...r.options,layoutDependency:n}),Y=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||w.postRender(()=>{const a=r.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ke.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=t;Y=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ne(e){const[t,n]=Ne(),s=f.useContext(Ut);return K.jsx(jn,{...e,layoutGroup:s,switchLayoutGroup:f.useContext(Kt),isPresent:t,safeToRemove:n})}const On={pan:{Feature:Fn},drag:{Feature:Wn,ProjectionNode:Gt,MeasureLayout:ne}};function Mt(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=s[o];i&&w.postRender(()=>i(t,T(t)))}class Hn extends S{mount(){const{current:t}=this.node;t&&(this.unmount=Ie(t,(n,s)=>(Mt(this.node,s,"Start"),o=>Mt(this.node,o,"End"))))}unmount(){}}class Rn extends S{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rt(F(this.node.current,"focus",()=>this.onFocus()),F(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lt(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=s[o];i&&w.postRender(()=>i(t,T(t)))}class Bn extends S{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=We(t,(o,i)=>(Lt(this.node,i,"Start"),(r,{success:a})=>Lt(this.node,r,a?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const st=new WeakMap,_=new WeakMap,Gn=e=>{const t=st.get(e.target);t&&t(e)},Nn=e=>{e.forEach(Gn)};function Un({root:e,...t}){const n=e||document;_.has(n)||_.set(n,{});const s=_.get(n),o=JSON.stringify(t);return s[o]||(s[o]=new IntersectionObserver(Nn,{root:e,...t})),s[o]}function zn(e,t,n){const s=Un(t);return st.set(e,n),s.observe(e),()=>{st.delete(e),s.unobserve(e)}}const $n={some:0,all:1};class Xn extends S{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:i}=t,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:$n[o]},a=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),c=l?d:h;c&&c(u)};return zn(this.node.current,r,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Yn(t,n))&&this.startObserver()}unmount(){}}function Yn({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const _n={inView:{Feature:Xn},tap:{Feature:Bn},focus:{Feature:Rn},hover:{Feature:Hn}},qn={layout:{ProjectionNode:Gt,MeasureLayout:ne}},Jn={...Pn,..._n,...On,...qn},xs=mn(Jn,gn),Kn=50,Vt=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Zn=()=>({time:0,x:Vt(),y:Vt()}),Qn={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function At(e,t,n,s){const o=n[t],{length:i,position:r}=Qn[t],a=o.current,u=n.time;o.current=e[`scroll${r}`],o.scrollLength=e[`scroll${i}`]-e[`client${i}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=tt(0,o.scrollLength,o.current);const l=s-u;o.velocity=l>Kn?0:Fe(o.current-a,l)}function ts(e,t,n){At(e,"x",t,n),At(e,"y",t,n),t.time=n}function es(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(je(s))n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const o=s.getBoundingClientRect();s=s.parentElement;const i=s.getBoundingClientRect();n.x+=o.left-i.left,n.y+=o.top-i.top}else if(s instanceof SVGGraphicsElement){const{x:o,y:i}=s.getBBox();n.x+=o,n.y+=i;let r=null,a=s.parentNode;for(;!r;)a.tagName==="svg"&&(r=a),a=s.parentNode;s=r}else break;return n}const ot={start:0,center:.5,end:1};function bt(e,t,n=0){let s=0;if(e in ot&&(e=ot[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(s=t*e),n+s}const ns=[0,0];function ss(e,t,n,s){let o=Array.isArray(e)?e:ns,i=0,r=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,ot[e]?e:"0"]),i=bt(o[0],n,s),r=bt(o[1],t),i-r}const os={All:[[0,0],[1,1]]},is={x:0,y:0};function rs(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function as(e,t,n){const{offset:s=os.All}=n,{target:o=e,axis:i="y"}=n,r=i==="y"?"height":"width",a=o!==e?es(o,e):is,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:rs(o),l={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let d=!t[i].interpolate;const h=s.length;for(let c=0;c<h;c++){const m=ss(s[c],l[r],u[r],a[i]);!d&&m!==t[i].interpolatorOffsets[c]&&(d=!0),t[i].offset[c]=m}d&&(t[i].interpolate=Oe(t[i].offset,He(s),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=Bt(0,1,t[i].interpolate(t[i].current))}function ls(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function cs(e,t,n,s={}){return{measure:o=>{ls(e,s.target,n),ts(e,n,o),(s.offset||s.target)&&as(e,n,s)},notify:()=>t(n)}}const M=new WeakMap,Dt=new WeakMap,q=new WeakMap,Tt=new WeakMap,I=new WeakMap,kt=e=>e===document.scrollingElement?window:e;function se(e,{container:t=document.scrollingElement,trackContentSize:n=!1,...s}={}){if(!t)return V;let o=q.get(t);o||(o=new Set,q.set(t,o));const i=Zn(),r=cs(t,e,i,s);if(o.add(r),!M.has(t)){const u=()=>{for(const c of o)c.measure(Z.timestamp);w.preUpdate(l)},l=()=>{for(const c of o)c.notify()},d=()=>w.read(u);M.set(t,d);const h=kt(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&Dt.set(t,et(t,d)),h.addEventListener("scroll",d,{passive:!0}),d()}if(n&&!I.has(t)){const u=M.get(t),l={width:t.scrollWidth,height:t.scrollHeight};Tt.set(t,l);const d=()=>{const c=t.scrollWidth,m=t.scrollHeight;(l.width!==c||l.height!==m)&&(u(),l.width=c,l.height=m)},h=w.read(d,!0);I.set(t,h)}const a=M.get(t);return w.read(a,!1,!0),()=>{var h;j(a);const u=q.get(t);if(!u||(u.delete(r),u.size))return;const l=M.get(t);M.delete(t),l&&(kt(t).removeEventListener("scroll",l),(h=Dt.get(t))==null||h(),window.removeEventListener("resize",l));const d=I.get(t);d&&(j(d),I.delete(t)),Tt.delete(t)}}const It=new Map;function us(e){const t={value:0},n=se(s=>{t.value=s[e.axis].progress*100},e);return{currentTime:t,cancel:n}}function oe({source:e,container:t,...n}){const{axis:s}=n;e&&(t=e);const o=It.get(t)??new Map;It.set(t,o);const i=n.target??"self",r=o.get(i)??{},a=s+(n.offset??[]).join(",");return r[a]||(r[a]=!n.target&&Re()?new ScrollTimeline({source:t,axis:s}):us({container:t,...n})),r[a]}function fs(e,t){const n=oe(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:s=>(s.pause(),Nt(o=>{s.time=s.iterationDuration*o},n))})}function hs(e){return e.length===2}function ds(e,t){return hs(e)?se(n=>{e(n[t.axis].progress,n)},t):Nt(e,oe(t))}function J(e,{axis:t="y",container:n=document.scrollingElement,...s}={}){if(!n)return V;const o={axis:t,container:n,...s};return typeof e=="function"?ds(e,o):fs(e,o)}const ms=()=>({scrollX:b(0),scrollY:b(0),scrollXProgress:b(0),scrollYProgress:b(0)}),W=e=>e?!e.current:!1;function ws({container:e,target:t,...n}={}){const s=A(ms);s.scrollXProgress.accelerate={factory:a=>J(a,{...n,axis:"x",container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),times:[0,1],keyframes:[0,1],ease:a=>a,duration:1},s.scrollYProgress.accelerate={factory:a=>J(a,{...n,axis:"y",container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),times:[0,1],keyframes:[0,1],ease:a=>a,duration:1};const o=f.useRef(null),i=f.useRef(!1),r=f.useCallback(()=>(o.current=J((a,{x:u,y:l})=>{s.scrollX.set(u.current),s.scrollXProgress.set(u.progress),s.scrollY.set(l.current),s.scrollYProgress.set(l.progress)},{...n,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var a;(a=o.current)==null||a.call(o)}),[e,t,JSON.stringify(n.offset)]);return rt(()=>{if(i.current=!1,W(e)||W(t)){i.current=!0;return}else return r()},[r]),f.useEffect(()=>{if(i.current)return dt(!W(e)),dt(!W(t)),r()},[r]),s}function ie(e){const t=A(()=>b(e)),{isStatic:n}=f.useContext(R);if(n){const[,s]=f.useState(e);f.useEffect(()=>t.on("change",s),[])}return t}function re(e,t){const n=ie(t()),s=()=>n.set(t());return s(),rt(()=>{const o=()=>w.preRender(s,!1,!0),i=e.map(r=>r.on("change",o));return()=>{i.forEach(r=>r()),j(s)}}),n}function gs(e){N.current=[],e();const t=re(N.current,e);return N.current=void 0,t}function ae(e,t,n,s){if(typeof e=="function")return gs(e);if(n!==void 0&&!Array.isArray(n)&&typeof t!="function")return ps(e,t,n,s);const r=typeof t=="function"?t:Be(t,n,s),a=Array.isArray(e)?Wt(e,r):Wt([e],([l])=>r(l)),u=Array.isArray(e)?void 0:e.accelerate;return u&&!u.isTransformed&&typeof t!="function"&&Array.isArray(n)&&(s==null?void 0:s.clamp)!==!1&&(a.accelerate={...u,times:t,keyframes:n,isTransformed:!0}),a}function Wt(e,t){const n=A(()=>[]);return re(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}function ps(e,t,n,s){const o=A(()=>Object.keys(n)),i=A(()=>({}));for(const r of o)i[r]=ae(e,t,n[r],s);return i}function vs(e,t={}){const{isStatic:n}=f.useContext(R),s=()=>it(e)?e.get():e;if(n)return ae(s);const o=ie(s());return f.useInsertionEffect(()=>Ge(o,e,t),[o,JSON.stringify(t)]),o}function Es(e,t={}){return vs(e,{type:"spring",...t})}export{Es as a,ae as b,xs as m,ws as u};
